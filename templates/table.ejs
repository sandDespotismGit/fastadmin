<!DOCTYPE html>
<html>
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <title><%= title %></title>
    <style>
      body {
        font-family: "Montserrat", sans-serif;
        padding: 20px;
      }
      table {
        border-collapse: collapse;
        width: 100%;
        margin-bottom: 30px;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 8px;
      }
      th {
        background-color: #f4f4f4;
      }
      form.inline {
        display: inline;
      }
      form.add-form input {
        width: 100%;
        padding: 6px;
        box-sizing: border-box;
      }
      button {
        padding: 5px 10px;
        font-weight: bold;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1><%= title %></h1>

    <table>
      <thead>
        <tr>
          <% displayFields.forEach(field => { %>
          <th><%= field %></th>
          <% }) %>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% data.forEach(row => { %>
        <tr>
          <% displayFields.forEach(field => { %>
          <td><%= row[field] %></td>
          <% }) %>
          <td>
            <form
              class="inline"
              method="POST"
              action="/admin/<%= tableName %>/delete/<%= row.id %>"
            >
              <button type="submit">🗑 Удалить</button>
            </form>
          </td>
        </tr>
        <% }) %>
        <!-- Форма добавления новой строки -->
        <tr>
          <form
            class="add-form"
            method="POST"
            action="/admin/<%= tableName %>/add"
          >
            <% displayFields.forEach(field => { %> <% if (field === 'id') { %>
            <td>—</td>
            <!-- Пропуск поля id -->
            <% } else { %>
            <td><input type="text" name="<%= field %>" /></td>
            <% } %> <% }) %>
            <td><button type="submit">➕ Добавить</button></td>
          </form>
        </tr>
      </tbody>
    </table>
  </body>
</html>
